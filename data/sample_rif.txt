.define expandandfadein .transition expand fadein .enddef
.define fadein .transition fadein .enddef
.responses room
	.response
		.matches LOOK
		.runs 1
		.does
			.says
				<div id="intro">
					<div id="introrain"></div>
					<div id="introwind"></div>
					<div id="introdream">{!You dream.|INTRODREAM!}<div id="introdream1"></div><div id="introdream2"></div></div>
				</div>
			.fadein
	.response
		.matches INTRODREAM
		.runs 2
		.does 1
				.says {!The patter of rain|INTRORAIN!}<div id="rainpunc">.</div> <div id="introrain2"></div> .expandandfadein .into #introrain
				.says {!A caress of wind|INTROWIND!}<div id="windpunc">.</div> <div id="introwind2"></div> .expandandfadein .into #introwind
				.says {!..|INTRODREAM!} .expandandfadein .into #introdream1
		.does 2 .says but you should not dream. .fadein .into #introdream2
				.sets intro_saw_dream
				.calls INTRODONE

	.response
		.matches INTRORAIN 
		.runs 1
		.does
			.says , .into #rainpunc
			.says but there is no rain. .expandandfadein .into #introrain2
			.sets intro_saw_rain
			.calls INTRODONE
	.response
		.matches INTROWIND
		.runs 1 
		.does
			.says , .into #windpunc
			.says but there is no wind. .expandandfadein .into #introwind2
			.sets intro_saw_wind
			.calls INTRODONE
		
	.response
		.matches INTRODONE
		.needs intro_saw_dream intro_saw_rain intro_saw_wind
		.does
			.says Next...
.end
